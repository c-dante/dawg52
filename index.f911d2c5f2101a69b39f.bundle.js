!function(u){function e(e){for(var t,n,a=e[0],r=e[1],o=e[2],c=0,i=[];c<a.length;c++)n=a[c],l[n]&&i.push(l[n][0]),l[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(u[t]=r[t]);for(f&&f(e);i.length;)i.shift()();return d.push.apply(d,o||[]),s()}function s(){for(var e,t=0;t<d.length;t++){for(var n=d[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==l[o]&&(a=!1)}a&&(d.splice(t--,1),e=c(c.s=n[0]))}return e}var n={},l={0:0},d=[];function c(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=u,c.c=n,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var r=0;r<t.length;r++)e(t[r]);var f=a;d.push([228,1,2]),s()}({228:function(e,t,n){"use strict";n.r(t);var a,r,o=n(7),c=n(0),i=n(99),u=(n(103),n(101)),s=n.n(u),l=function(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:5)-t.length;return n<=0?{hand:t,deck:e}:{hand:t.concat(e.slice(0,n)),deck:e.slice(n)}},d=function(e,t){return{type:e,payload:t}},f=n(1),y=n.n(f);function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(e){b(t,e,n[e])})}return t}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){return{message:e,postedAt:Date.now()}},j={Location:"Location",Event:"Event",Artifact:"Artifact",Person:"Person"},g="PlayForTurn",p="PlayingLocation",w="Resolve",v={hand:[],deck:[],played:[],discard:[],gameLog:[],currentLocation:void 0,gameState:g,resolution:void 0},m=new Set([g,p]),S=(b(a={},g,new Set([j.Location,j.Event])),b(a,p,new Set([j.Event,j.Artifact,j.Person])),a),k=function(e,t){var n=e.currentLocation,a=n?"on your way to ".concat(n.name):"wandering the wilderness",r="While ".concat(a,", ").concat(t.name," jumps out.");return h({},e,{hand:e.hand.filter(function(e){return e!==t}),played:e.played.concat(t),gameState:w,resolution:{message:[r,y()(["resolution","message"],e)].filter(function(e){return e}).join("\n"),success:!0},gameLog:e.gameLog.concat(O(r))})},L=(b(r={},g,function(e,t){var n=t.payload;switch(n.type){case j.Location:return h({},e,{playingCard:n,gameState:p});case j.Event:return k(e,n);default:throw new Error("Invalid card type")}}),b(r,p,function(e,t){var n,a,r,o,c,i,u,s,l,d,f,b,g,p=e.playingCard,v=t.payload,m=(n=e,r="Welcome to ".concat((a=p).name,"."),h({},n,{currentLocation:a,hand:n.hand.filter(function(e){return e!==a}),played:n.played.concat(a),gameState:w,resolution:{message:r,success:!0},gameLog:n.gameLog.concat(O(r))}));if(!v)return m;switch(v.type){case j.Artifact:return d=v,f=(l=m).currentLocation,b=f?"on your way to ".concat(f.name):"wandering the wilderness",g="While ".concat(b,", you stumble on ").concat(d.name,"."),h({},l,{hand:l.hand.filter(function(e){return e!==d}),played:l.played.concat(d),gameState:w,resolution:{message:[g,y()(["resolution","message"],l)].filter(function(e){return e}).join(" "),success:!0},gameLog:l.gameLog.concat(O(g))});case j.Event:return k(m,v);case j.Person:return c=v,i=(o=m).currentLocation,u=i?"on your way to ".concat(i.name):"wandering the wilderness",s="While ".concat(u,", a stranger beckons. It's ").concat(c.name,"!"),h({},o,{hand:o.hand.filter(function(e){return e!==c}),played:o.played.concat(c),gameState:w,resolution:{message:[s,y()(["resolution","message"],o)].filter(function(e){return e}).join(" "),success:!0},gameLog:o.gameLog.concat(O(s))});default:throw new Error("@todo: handle finding ".concat(v.name," at location"))}}),r),E="GameAction:NEW_GAME",P="GameAction:PLAY_CARD",A="GameAction:CONTINUE",_={newGame:function(){return d(E)},playCard:function(e){return d(P,e)},continue:function(){return d(A)}},C=n(102),N=n.n(C),D=n(54),G=n.n(D),T=n(4),x=n(25),M=n.n(x);function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var R=y()(["boundActions"]),U=function(e){var t=e.newGame;return Object(c.a)("section",{class:"actions"},[Object(c.a)("button",{onClick:t},["New game"])])},W=function(e){var t=e.card,n=e.playCard,a=void 0===n?G.a:n,r=e.validPlays,o=void 0===r?new Set:r;return Object(c.a)("div",{class:M()("btn","card",{"valid-play":o.has(t.type)}),onClick:function(){return a(t)}},[t.name])},X=Object(T.a)([y()("resolution"),y()("boundActions")],function(e,t){if(e)return{resolution:e,onNext:t.continue}}),J=function(e){var t=e.resolution,n=e.onNext;return Object(c.a)("div",{class:M()("resolve",{"resolve--success":t.success,"resolve--failure":!t.success})},[Object(c.a)("div",{},t.message),Object(c.a)("button",{onClick:n},"Next")])},V=Object(T.a)([y()("played"),y()("currentLocation")],function(e,t){return{cards:e,locationName:t?"At: ".concat(t.name):"Lost in the wilderness"}}),Y=function(e){var t=e.cards,n=e.locationName;return Object(c.a)("section",{class:"in-play"},[Object(c.a)("h4",{},n),Object(c.a)("div",{class:M()("cards",{"cards--empty":t.length<=0})},[t.length<=0?"You have nothing.":void 0].concat(I(t.map(function(e){return Object(c.a)(W,{card:e})}))))])},q=Object(T.a)([y()("discard")],function(e){return{cards:e}}),F=function(e){var t=e.cards;return Object(c.a)("section",{class:"dicard"},[Object(c.a)("h4",{},"Dicard"),t.length<=0?Object(c.a)("div",{},"Empty."):Object(c.a)("div",{},[Object(c.a)("div",{},t.length)])])},H=Object(T.a)([y()(["gameState"])],function(e){return N()(new Set,[e],S)}),z=Object(T.a)([y()(["hand"]),y()(["boundActions","playCard"]),H],function(e,t,n){return{hand:e,playCard:t,validPlays:n}}),B=function(e){var t=e.hand,n=e.playCard,a=e.validPlays;return Object(c.a)("section",{class:"hand-stats"},[Object(c.a)("h4",{},"Hand"),Object(c.a)("div",{class:"cards"},I(t.map(function(e){return Object(c.a)(W,{card:e,playCard:n,validPlays:a})})).concat([t.length<=0?Object(c.a)("div",{},"no cards in hand..."):void 0]))])},K=Object(T.a)([y()(["deck"])],function(e){return{deck:e}}),Q=function(e){var t=e.deck;return Object(c.a)("section",{class:"deck-stats"},[Object(c.a)("label",{},"Remaining Cards: "),Object(c.a)("span",{},t.length)])},Z=Object(T.a)([y()(["gameState"]),y()(["hand"]),H],function(e,t,n){return e===g&&t.filter(function(e){return n.has(e.type)}).length<=0}),$=Object(T.a)([y()(["gameState"]),y()(["playingCard","name"]),Z],function(e,t,n){switch(e){case g:return n?"No more plays. Game over.":"Do something. (Select a Location or Event)";case p:return"On your way to ".concat(t,", you stumble across... (Select an Artifact, Event, or Person)");case w:return"";default:return"Start a game? [Unknown state: ".concat(e,"]")}}),ee=Object(T.a)([y()("gameState"),y()("boundActions")],function(e,t){return e===p?{hasSkip:!0,onSkip:function(){return t.playCard(void 0)}}:{hasSkip:!1}}),te=Object(T.a)([$,ee,X,Z],function(e,t,n,a){return{instruction:e,skipStep:t,resolveState:n,gameOver:a}}),ne=function(e){var t=e.instruction,n=e.skipStep,a=e.resolveState,r=e.gameOver;return Object(c.a)("section",{class:"feedback"},[a?Object(c.a)(J,a):void 0,t?Object(c.a)("div",{class:"instruction"},t):void 0,n.hasSkip?Object(c.a)("button",{onClick:n.onSkip},"Skip"):void 0,r?Object(c.a)("button",{onClick:G.a},"Score This Game"):void 0])},ae=Object(T.a)([y()(["gameLog"])],function(e){return{events:e.slice().reverse()}}),re=function(e){var t=e.events;return Object(c.a)("section",{class:"game-log"},I(t.map(function(e,t){return Object(c.a)("div",{class:"log-message"},"[".concat(new Date(e.postedAt).toISOString(),"] ").concat(e.message))})))},oe=Object(T.a)([R,z,K,te,q,V,ae],function(e,t,n,a,r,o,c){return{actionsState:e,handState:t,deckState:n,feedbackState:a,discardState:r,inPlayState:o,gameLogState:c}}),ce=function(e){var t=function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=r.apply(void 0,t);return console.log(o,t,a),a}}(oe)(e);return Object(c.a)("div",{class:"dawg"},[Object(c.a)("h1",{},["dawg",Object(c.a)("div",{class:"small"},e.gameState)]),Object(c.a)(Y,t.inPlayState),Object(c.a)(ne,t.feedbackState),Object(c.a)(B,t.handState),Object(c.a)(Q,t.deckState),Object(c.a)(F,t.discardState),Object(c.a)(U,t.actionsState),Object(c.a)(re,t.gameLogState)])};var ie,ue=Object(i.a)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:v,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case E:var n=l(function(e){for(var t=e.slice(),n=0;n<t.length;n++){var a=Math.floor(Math.random()*(t.length-n))+n,r=t[a];t[a]=t[n],t[n]=r}return t}(Object.keys(j).flatMap(function(n){return new Array(13).fill(0).map(function(e,t){return{type:n,number:t+1,name:"".concat(t+1," of ").concat(n),faceDown:!0,upsideDown:!1}})})),[]),a=n.deck,r=n.hand;return h({},v,{hand:r,deck:a,gameState:g,gameLog:e.gameLog.concat(O("[New Game]"))});case P:if(!m.has(e.gameState))throw new Error("Cannot play a card now.");if(!S[e.gameState])throw new Error("No valid plays in ".concat(e.gameState,"?"));var o=L[e.gameState];if(!o)throw new Error("No handler for ".concat(e.gameState));return o(e,t);case A:var c=l(e.deck,e.hand);return h({},e,{deck:c.deck,hand:c.hand,gameState:g,resolution:void 0});default:return console.debug("Unhandled by dawg",e,t),e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),se=(ie=ue,s()(function(e){return function(){return ie.dispatch(e.apply(void 0,arguments))}})(_)),le=function(){var e=document.querySelector("body .dawg"),t=function(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,a;t=r,a=o[n=e],n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a})}return r}({},ue.getState(),{boundActions:se});Object(o.f)(Object(c.a)(ce,t),document.body,e)};ue.subscribe(le),le(),se.newGame()}});