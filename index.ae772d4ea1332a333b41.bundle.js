!function(u){function t(t){for(var e,n,a=t[0],r=t[1],c=t[2],o=0,i=[];o<a.length;o++)n=a[o],s[n]&&i.push(s[n][0]),s[n]=0;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(u[e]=r[e]);for(f&&f(t);i.length;)i.shift()();return d.push.apply(d,c||[]),l()}function l(){for(var t,e=0;e<d.length;e++){for(var n=d[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(d.splice(e--,1),t=o(o.s=n[0]))}return t}var n={},s={0:0},d=[];function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return u[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=u,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var e=window.webpackJsonp=window.webpackJsonp||[],a=e.push.bind(e);e.push=t,e=e.slice();for(var r=0;r<e.length;r++)t(e[r]);var f=a;d.push([228,1,2]),l()}({228:function(t,e,n){"use strict";n.r(e);var a,r,c=n(7),o=n(0),i=n(98),u=(n(103),n(100)),l=n.n(u),s=function(t,e){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:5)-e.length;return n<=0?{hand:e,deck:t}:{hand:e.concat(t.slice(0,n)),deck:t.slice(n)}},d=function(t,e){return{type:t,payload:e}};function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(t){b(e,t,n[t])})}return e}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v={Location:"Location",Event:"Event",Artifact:"Artifact",Person:"Person"},p="PlayForTurn",y="PlayingLocation",O="PlayingEvent",h="Resolve",g={hand:[],deck:[],played:[],discard:[],currentLocation:void 0,gameState:p,resolution:void 0},j=new Set([p,y]),m=(b(a={},p,new Set([v.Location,v.Event])),b(a,y,new Set([v.Event,v.Artifact,v.Person])),a),S=(b(r={},p,function(t,e){var n=e.payload;switch(n.type){case v.Location:return f({},t,{playingCard:n,gameState:y});case v.Event:return f({},t,{playingCard:n,gameState:O});default:throw new Error("Invalid card type")}}),b(r,y,function(t,e){var n=t.playingCard,a=e.payload;if(!a)return f({},t,{hand:t.hand.filter(function(t){return t!==n}),played:t.played.concat(n),currentLocation:n,gameState:h,resolution:{message:"Welcome to ".concat(n.name),success:!0}});switch(a.type){case v.Artifact:return f({},t,{hand:t.hand.filter(function(t){return t!==n&&t!==a}),played:t.played.concat(n,a),currentLocation:n,gameState:h,resolution:{message:"Welcome to ".concat(n.name,". You found ").concat(a.name," on your way!"),success:!0}});default:throw new Error("@todo: handle finding ".concat(a.name," at location"))}}),r),w="GameAction:NEW_GAME",k="GameAction:PLAY_CARD",E="GameAction:CONTINUE",P={newGame:function(){return d(w)},playCard:function(t){return d(k,t)},continue:function(){return d(E)}},A=n(101),_=n.n(A),C=n(102),N=n.n(C),L=n(1),D=n.n(L),T=n(5),x=n(53),M=n.n(x);function G(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var I=D()(["boundActions"]),R=function(t){var e=t.newGame;return Object(o.a)("section",{class:"actions"},[Object(o.a)("button",{onClick:e},["New game"])])},U=function(t){var e=t.card,n=t.playCard,a=void 0===n?N.a:n,r=t.validPlays,c=void 0===r?new Set:r;return Object(o.a)("div",{class:M()("btn","card",{"valid-play":c.has(e.type)}),onClick:function(){return a(e)}},[e.name])},X=Object(T.a)([D()("resolution"),D()("boundActions")],function(t,e){if(t)return{resolution:t,onNext:e.continue}}),W=function(t){var e=t.resolution,n=t.onNext;return Object(o.a)("div",{class:M()("resolve",{"resolve--success":e.success,"resolve--failure":!e.success})},[Object(o.a)("div",{},e.message),Object(o.a)("button",{onClick:n},"Next")])},Y=Object(T.a)([D()("played"),D()("currentLocation")],function(t,e){return{cards:t,locationName:e?"At: ".concat(e.name):"Lost in the wilderness"}}),J=function(t){var e=t.cards,n=t.locationName;return Object(o.a)("section",{class:"in-play"},[Object(o.a)("h4",{},n),e.length<=0?Object(o.a)("div",{},"You have nothing."):Object(o.a)("div",{class:"cards"},G(e.map(function(t){return Object(o.a)(U,{card:t})})))])},V=Object(T.a)([D()("discard")],function(t){return{cards:t}}),q=function(t){var e=t.cards;return Object(o.a)("section",{class:"dicard"},[Object(o.a)("h4",{},"Dicard"),e.length<=0?Object(o.a)("div",{},"Empty."):Object(o.a)("div",{},[Object(o.a)("div",{},e.length)])])},F=Object(T.a)([D()(["gameState"])],function(t){return _()(new Set,[t],m)}),H=Object(T.a)([D()(["hand"]),D()(["boundActions","playCard"]),F],function(t,e,n){return{hand:t,playCard:e,validPlays:n}}),z=function(t){var e=t.hand,n=t.playCard,a=t.validPlays;return Object(o.a)("section",{class:"hand-stats"},[Object(o.a)("h4",{},"Hand"),Object(o.a)("div",{class:"cards"},G(e.map(function(t){return Object(o.a)(U,{card:t,playCard:n,validPlays:a})})).concat([e.length<=0?Object(o.a)("div",{},"no cards in hand..."):void 0]))])},B=Object(T.a)([D()(["deck"])],function(t){return{deck:t}}),K=function(t){var e=t.deck;return Object(o.a)("section",{class:"deck-stats"},[Object(o.a)("label",{},"Remaining Cards: "),Object(o.a)("span",{},e.length)])},Q=Object(T.a)([D()(["gameState"]),D()(["playingCard","name"])],function(t,e){switch(t){case p:return"Do something. (Select a Location or Event)";case y:return"On your way to ".concat(e,", you stumble across... (Select an Artifact, Event, or Person)");case O:return"[@todo: feedback for resolve event: ".concat(e,"]");case h:return"";default:return"Start a game? [Unknown state: ".concat(t,"]")}}),Z=Object(T.a)([D()("gameState"),D()("boundActions")],function(t,e){return t===y?{hasSkip:!0,onSkip:function(){return e.playCard(void 0)}}:{hasSkip:!1}}),$=Object(T.a)([Q,Z,X],function(t,e,n){return{instruction:t,skipStep:e,resolveState:n}}),tt=function(t){var e=t.instruction,n=t.skipStep,a=t.resolveState;return Object(o.a)("section",{class:"feedback"},[a?Object(o.a)(W,a):void 0,e?Object(o.a)("div",{class:"instruction"},e):void 0,n.hasSkip?Object(o.a)("button",{onClick:n.onSkip},"Skip"):void 0])},et=Object(T.a)([I,H,B,$,V,Y],function(t,e,n,a,r,c){return{actionsState:t,handState:e,deckState:n,feedbackState:a,discardState:r,inPlayState:c}}),nt=function(t){var e=function(r){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=r.apply(void 0,e);return console.log(c,e,a),a}}(et)(t);return Object(o.a)("div",{class:"dawg"},[Object(o.a)("h1",{},["dawg",Object(o.a)("div",{class:"small"},t.gameState)]),Object(o.a)(J,e.inPlayState),Object(o.a)(tt,e.feedbackState),Object(o.a)(z,e.handState),Object(o.a)(K,e.deckState),Object(o.a)(q,e.discardState),Object(o.a)(R,e.actionsState)])};var at,rt=Object(i.a)(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:g,e=1<arguments.length?arguments[1]:void 0;switch(e.type){case w:var n=s(function(t){for(var e=t.slice(),n=0;n<e.length;n++){var a=Math.floor(Math.random()*(e.length-n))+n,r=e[a];e[a]=e[n],e[n]=r}return e}(Object.keys(v).flatMap(function(n){return new Array(13).fill(0).map(function(t,e){return{type:n,number:e+1,name:"".concat(e+1," of ").concat(n),faceDown:!0,upsideDown:!1}})})),[]),a=n.deck,r=n.hand;return f({},g,{hand:r,deck:a,gameState:p});case k:if(!j.has(t.gameState))throw new Error("Cannot play a card now.");if(!m[t.gameState])throw new Error("No valid plays in ".concat(t.gameState,"?"));var c=S[t.gameState];if(!c)throw new Error("No handler for ".concat(t.gameState));return c(t,e);case E:var o=s(t.deck,t.hand);return f({},t,{deck:o.deck,hand:o.hand,gameState:p,resolution:void 0});default:return console.debug("Unhandled by dawg",t,e),t}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ct=(at=rt,l()(function(t){return function(){return at.dispatch(t.apply(void 0,arguments))}})(P)),ot=function(){var t=document.querySelector("body .dawg"),e=function(r){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{},e=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(c).filter(function(t){return Object.getOwnPropertyDescriptor(c,t).enumerable}))),e.forEach(function(t){var e,n,a;e=r,a=c[n=t],n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a})}return r}({},rt.getState(),{boundActions:ct});Object(c.f)(Object(o.a)(nt,e),document.body,t)};rt.subscribe(ot),ot(),ct.newGame()}});