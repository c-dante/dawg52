!function(u){function t(t){for(var e,n,r=t[0],a=t[1],o=t[2],c=0,i=[];c<r.length;c++)n=r[c],s[n]&&i.push(s[n][0]),s[n]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(u[e]=a[e]);for(f&&f(t);i.length;)i.shift()();return d.push.apply(d,o||[]),l()}function l(){for(var t,e=0;e<d.length;e++){for(var n=d[e],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(d.splice(e--,1),t=c(c.s=n[0]))}return t}var n={},s={0:0},d=[];function c(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return u[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=u,c.c=n,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var e=window.webpackJsonp=window.webpackJsonp||[],r=e.push.bind(e);e.push=t,e=e.slice();for(var a=0;a<e.length;a++)t(e[a]);var f=r;d.push([226,1,2]),l()}({226:function(t,e,n){"use strict";n.r(e);var r,a,o=n(7),c=n(0),i=n(97),u=(n(101),n(99)),l=n.n(u),s=function(t,e){return{type:t,payload:e}};function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={Location:"Location",Event:"Event",Artifact:"Artifact",Person:"Person"},v="PlayForTurn",p="PlayingLocation",y="PlayingEvent",O="Resolve",g={hand:[],deck:[],discard:[],gameState:v,resolution:void 0},h=new Set([v,p]),j=(f(r={},v,new Set([b.Location,b.Event])),f(r,p,new Set([b.Event,b.Artifact,b.Person])),r),m=(f(a={},v,function(t,e){var n=e.payload;switch(n.type){case b.Location:return d({},t,{playingCard:n,gameState:p});case b.Event:return d({},t,{playingCard:n,gameState:y});default:throw new Error("Invalid card type")}}),f(a,p,function(t,e){var n=t.playingCard;if(!e.payload)return d({},t,{hand:t.hand.filter(function(t){return t!==n}),discard:t.discard.concat(n),gameState:O,resolution:{message:"Welcome to ".concat(n.name),success:!0}});throw new Error("@todo: handle location play.")}),a),S="GameAction:NEW_GAME",w="GameAction:PLAY_CARD",k="GameAction:CONTINUE",E={newGame:function(){return s(S)},playCard:function(t){return s(w,t)},continue:function(){return s(k)}},P=n(100),A=n.n(P),_=n(3),C=n.n(_),N=n(5),D=n(53),L=n.n(D);function T(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=C()(["boundActions"]),M=function(t){var e=t.newGame;return Object(c.a)("div",{class:"actions"},[Object(c.a)("button",{onClick:e},["New game"])])},G=Object(N.a)([C()("resolution"),C()("boundActions")],function(t,e){if(t)return{resolution:t,onNext:e.continue}}),I=function(t){var e=t.resolution,n=t.onNext;return Object(c.a)("div",{class:L()("resolve",{"resolve--success":e.success,"resolve--failure":!e.success})},[Object(c.a)("div",{},e.message),Object(c.a)("button",{onClick:n},"Next")])},R=Object(N.a)([C()("discard")],function(t){return{cards:t}}),U=function(t){var e=t.cards;return Object(c.a)("div",{class:"dicard"},[Object(c.a)("h4",{},"Dicard"),e.length<=0?Object(c.a)("div",{},"Empty."):Object(c.a)("div",{},[Object(c.a)("div",{},e.length)])])},X=function(t){var e=t.card,n=t.playCard,r=t.validPlays;return Object(c.a)("div",{class:L()("btn","card",{"valid-play":r.has(e.type)}),onClick:function(){return n(e)}},[e.name])},J=Object(N.a)([C()(["gameState"])],function(t){return A()(new Set,[t],j)}),V=Object(N.a)([C()(["hand"]),C()(["boundActions","playCard"]),J],function(t,e,n){return{hand:t,playCard:e,validPlays:n}}),W=function(t){var e=t.hand,n=t.playCard,r=t.validPlays;return Object(c.a)("div",{class:"hand-stats"},[Object(c.a)("h4",{},"Hand"),Object(c.a)("div",{class:"cards"},T(e.map(function(t){return Object(c.a)(X,{card:t,playCard:n,validPlays:r})})).concat([e.length<=0?Object(c.a)("div",{},"no cards in hand..."):void 0]))])},q=Object(N.a)([C()(["deck"])],function(t){return{deck:t}}),F=function(t){var e=t.deck;return Object(c.a)("div",{class:"deck-stats"},[Object(c.a)("label",{},"Remaining Cards: "),Object(c.a)("span",{},e.length)])},H=Object(N.a)([C()(["gameState"]),C()(["playingCard","name"])],function(t,e){switch(t){case v:return"Do something. (Select a Location or Event)";case p:return"On your way to ".concat(e,", you stumble across... (Select an Artifact, Event, or Person)");case y:return"[@todo: feedback for resolve event: ".concat(e,"]");case O:return"";default:return"Start a game? [Unknown state: ".concat(t,"]")}}),Y=Object(N.a)([C()("gameState"),C()("boundActions")],function(t,e){return t===p?{hasSkip:!0,onSkip:function(){return e.playCard(void 0)}}:{hasSkip:!1}}),z=Object(N.a)([H,Y,G],function(t,e,n){return{instruction:t,skipStep:e,resolveState:n}}),B=function(t){var e=t.instruction,n=t.skipStep,r=t.resolveState;return Object(c.a)("div",{class:"feedback"},[r?Object(c.a)(I,r):void 0,e?Object(c.a)("div",{class:"instruction"},e):void 0,n.hasSkip?Object(c.a)("button",{onClick:n.onSkip},"Skip"):void 0])},K=Object(N.a)([x,V,q,z,R],function(t,e,n,r,a){return{actionsState:t,handState:e,deckState:n,feedbackState:r,discardState:a}}),Q=function(t){var e=function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=a.apply(void 0,e);return console.log(o,e,r),r}}(K)(t);return Object(c.a)("div",{class:"dawg"},[Object(c.a)("h1",{},["dawg",Object(c.a)("div",{class:"small"},t.gameState)]),Object(c.a)(B,e.feedbackState),Object(c.a)(W,e.handState),Object(c.a)(F,e.deckState),Object(c.a)(U,e.discardState),Object(c.a)(M,e.actionsState)])};var Z,$=Object(i.a)(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:g,e=1<arguments.length?arguments[1]:void 0;switch(e.type){case S:var n=function(t,e){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:5)-e.length;return n<=0?{hand:e,deck:t}:{hand:e.concat(t.slice(0,n)),deck:t.slice(n)}}(function(t){for(var e=t.slice(),n=0;n<e.length;n++){var r=Math.floor(Math.random()*(e.length-n))+n,a=e[r];e[r]=e[n],e[n]=a}return e}(Object.keys(b).flatMap(function(n){return new Array(13).fill(0).map(function(t,e){return{type:n,number:e+1,name:"".concat(e+1," of ").concat(n)}})})),[]),r=n.deck,a=n.hand;return d({},g,{hand:a,deck:r,gameState:v});case w:if(!h.has(t.gameState))throw new Error("Cannot play a card now.");if(!j[t.gameState])throw new Error("No valid plays in ".concat(t.gameState,"?"));var o=m[t.gameState];if(!o)throw new Error("No handler for ".concat(t.gameState));return o(t,e);case k:return d({},t,{gameState:v,resolution:void 0});default:return console.debug("Unhandled by dawg",t,e),t}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),tt=(Z=$,l()(function(t){return function(){return Z.dispatch(t.apply(void 0,arguments))}})(E)),et=function(){var t=document.querySelector("body .dawg"),e=function(a){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,r;e=a,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return a}({},$.getState(),{boundActions:tt});Object(o.f)(Object(c.a)(Q,e),document.body,t)};$.subscribe(et),et(),tt.newGame()}});