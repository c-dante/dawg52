!function(u){function e(e){for(var t,n,a=e[0],r=e[1],o=e[2],c=0,i=[];c<a.length;c++)n=a[c],l[n]&&i.push(l[n][0]),l[n]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(u[t]=r[t]);for(f&&f(e);i.length;)i.shift()();return d.push.apply(d,o||[]),s()}function s(){for(var e,t=0;t<d.length;t++){for(var n=d[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==l[o]&&(a=!1)}a&&(d.splice(t--,1),e=c(c.s=n[0]))}return e}var n={},l={0:0},d=[];function c(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=u,c.c=n,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var r=0;r<t.length;r++)e(t[r]);var f=a;d.push([228,1,2]),s()}({228:function(e,t,n){"use strict";n.r(t);var a,r,o=n(7),c=n(0),i=n(98),u=(n(103),n(100)),s=n.n(u),l=function(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:5)-t.length;return n<=0?{hand:t,deck:e}:{hand:t.concat(e.slice(0,n)),deck:e.slice(n)}},d=function(e,t){return{type:e,payload:t}};function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(e){g(t,e,n[e])})}return t}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){return{message:e,postedAt:Date.now()}},p={Location:"Location",Event:"Event",Artifact:"Artifact",Person:"Person"},v="PlayForTurn",m="PlayingLocation",y="Resolve",O={hand:[],deck:[],played:[],discard:[],gameLog:[],currentLocation:void 0,gameState:v,resolution:void 0},h=new Set([v,m]),j=(g(a={},v,new Set([p.Location,p.Event])),g(a,m,new Set([p.Event,p.Artifact,p.Person])),a),S=(g(r={},v,function(e,t){var n=t.payload;switch(n.type){case p.Location:return f({},e,{playingCard:n,gameState:m});case p.Event:var a="Off in the distance, you see something strange. It's ".concat(n.name,"!");return f({},e,{hand:e.hand.filter(function(e){return e!==n}),played:e.played.concat(n),gameState:y,resolution:{message:a,success:!0},gameLog:e.gameLog.concat(b(a))});default:throw new Error("Invalid card type")}}),g(r,m,function(e,t){var n=e.playingCard,a=t.payload,r="Welcome to ".concat(n.name);if(!a)return f({},e,{hand:e.hand.filter(function(e){return e!==n}),played:e.played.concat(n),currentLocation:n,gameState:y,resolution:{locationMessage:r,success:!0},gameLog:e.gameLog.concat(b(r))});switch(a.type){case p.Artifact:var o="You found ".concat(a.name," on your way!");return f({},e,{hand:e.hand.filter(function(e){return e!==n&&e!==a}),played:e.played.concat(n,a),currentLocation:n,gameState:y,resolution:{message:[r,o].join(" "),success:!0},gameLog:e.gameLog.concat(b(r),b(o))});case p.Event:var c="While heading to ".concat(n.name,", ").concat(a.name," jumps out.");return f({},e,{hand:e.hand.filter(function(e){return e!==n&&e!==a}),played:e.played.concat(n,a),currentLocation:n,gameState:y,resolution:{message:[r,c].join(" "),success:!0},gameLog:e.gameLog.concat(b(r),b(c))});case p.Person:var i='"Hey!" A stranger beckons. It\'s '.concat(a.name,"!");return f({},e,{hand:e.hand.filter(function(e){return e!==n&&e!==a}),played:e.played.concat(n,a),currentLocation:n,gameState:y,resolution:{message:[r,i].join(" "),success:!0},gameLog:e.gameLog.concat(b(r),b(i))});default:throw new Error("@todo: handle finding ".concat(a.name," at location"))}}),r),w="GameAction:NEW_GAME",k="GameAction:PLAY_CARD",L="GameAction:CONTINUE",E={newGame:function(){return d(w)},playCard:function(e){return d(k,e)},continue:function(){return d(L)}},P=n(101),A=n.n(P),_=n(102),C=n.n(_),N=n(1),D=n.n(N),M=n(4),T=n(53),x=n.n(T);function G(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var I=D()(["boundActions"]),R=function(e){var t=e.newGame;return Object(c.a)("section",{class:"actions"},[Object(c.a)("button",{onClick:t},["New game"])])},U=function(e){var t=e.card,n=e.playCard,a=void 0===n?C.a:n,r=e.validPlays,o=void 0===r?new Set:r;return Object(c.a)("div",{class:x()("btn","card",{"valid-play":o.has(t.type)}),onClick:function(){return a(t)}},[t.name])},X=Object(M.a)([D()("resolution"),D()("boundActions")],function(e,t){if(e)return{resolution:e,onNext:t.continue}}),W=function(e){var t=e.resolution,n=e.onNext;return Object(c.a)("div",{class:x()("resolve",{"resolve--success":t.success,"resolve--failure":!t.success})},[Object(c.a)("div",{},t.message),Object(c.a)("button",{onClick:n},"Next")])},Y=Object(M.a)([D()("played"),D()("currentLocation")],function(e,t){return{cards:e,locationName:t?"At: ".concat(t.name):"Lost in the wilderness"}}),H=function(e){var t=e.cards,n=e.locationName;return Object(c.a)("section",{class:"in-play"},[Object(c.a)("h4",{},n),t.length<=0?Object(c.a)("div",{},"You have nothing."):Object(c.a)("div",{class:"cards"},G(t.map(function(e){return Object(c.a)(U,{card:e})})))])},J=Object(M.a)([D()("discard")],function(e){return{cards:e}}),V=function(e){var t=e.cards;return Object(c.a)("section",{class:"dicard"},[Object(c.a)("h4",{},"Dicard"),t.length<=0?Object(c.a)("div",{},"Empty."):Object(c.a)("div",{},[Object(c.a)("div",{},t.length)])])},q=Object(M.a)([D()(["gameState"])],function(e){return A()(new Set,[e],j)}),F=Object(M.a)([D()(["hand"]),D()(["boundActions","playCard"]),q],function(e,t,n){return{hand:e,playCard:t,validPlays:n}}),z=function(e){var t=e.hand,n=e.playCard,a=e.validPlays;return Object(c.a)("section",{class:"hand-stats"},[Object(c.a)("h4",{},"Hand"),Object(c.a)("div",{class:"cards"},G(t.map(function(e){return Object(c.a)(U,{card:e,playCard:n,validPlays:a})})).concat([t.length<=0?Object(c.a)("div",{},"no cards in hand..."):void 0]))])},B=Object(M.a)([D()(["deck"])],function(e){return{deck:e}}),K=function(e){var t=e.deck;return Object(c.a)("section",{class:"deck-stats"},[Object(c.a)("label",{},"Remaining Cards: "),Object(c.a)("span",{},t.length)])},Q=Object(M.a)([D()(["gameState"]),D()(["playingCard","name"])],function(e,t){switch(e){case v:return"Do something. (Select a Location or Event)";case m:return"On your way to ".concat(t,", you stumble across... (Select an Artifact, Event, or Person)");case y:return"";default:return"Start a game? [Unknown state: ".concat(e,"]")}}),Z=Object(M.a)([D()("gameState"),D()("boundActions")],function(e,t){return e===m?{hasSkip:!0,onSkip:function(){return t.playCard(void 0)}}:{hasSkip:!1}}),$=Object(M.a)([Q,Z,X],function(e,t,n){return{instruction:e,skipStep:t,resolveState:n}}),ee=function(e){var t=e.instruction,n=e.skipStep,a=e.resolveState;return Object(c.a)("section",{class:"feedback"},[a?Object(c.a)(W,a):void 0,t?Object(c.a)("div",{class:"instruction"},t):void 0,n.hasSkip?Object(c.a)("button",{onClick:n.onSkip},"Skip"):void 0])},te=Object(M.a)([D()(["gameLog"])],function(e){return{events:e.slice().reverse()}}),ne=function(e){var t=e.events;return Object(c.a)("section",{class:"game-log"},G(t.map(function(e,t){return Object(c.a)("div",{class:"log-message"},"[".concat(new Date(e.postedAt).toISOString(),"] ").concat(e.message))})))},ae=Object(M.a)([I,F,B,$,J,Y,te],function(e,t,n,a,r,o,c){return{actionsState:e,handState:t,deckState:n,feedbackState:a,discardState:r,inPlayState:o,gameLogState:c}}),re=function(e){var t=function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=r.apply(void 0,t);return console.log(o,t,a),a}}(ae)(e);return Object(c.a)("div",{class:"dawg"},[Object(c.a)("h1",{},["dawg",Object(c.a)("div",{class:"small"},e.gameState)]),Object(c.a)(H,t.inPlayState),Object(c.a)(ee,t.feedbackState),Object(c.a)(z,t.handState),Object(c.a)(K,t.deckState),Object(c.a)(V,t.discardState),Object(c.a)(R,t.actionsState),Object(c.a)(ne,t.gameLogState)])};var oe,ce=Object(i.a)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:O,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w:var n=l(function(e){for(var t=e.slice(),n=0;n<t.length;n++){var a=Math.floor(Math.random()*(t.length-n))+n,r=t[a];t[a]=t[n],t[n]=r}return t}(Object.keys(p).flatMap(function(n){return new Array(13).fill(0).map(function(e,t){return{type:n,number:t+1,name:"".concat(t+1," of ").concat(n),faceDown:!0,upsideDown:!1}})})),[]),a=n.deck,r=n.hand;return f({},O,{hand:r,deck:a,gameState:v,gameLog:e.gameLog.concat(b("[New Game]"))});case k:if(!h.has(e.gameState))throw new Error("Cannot play a card now.");if(!j[e.gameState])throw new Error("No valid plays in ".concat(e.gameState,"?"));var o=S[e.gameState];if(!o)throw new Error("No handler for ".concat(e.gameState));return o(e,t);case L:var c=l(e.deck,e.hand);return f({},e,{deck:c.deck,hand:c.hand,gameState:v,resolution:void 0});default:return console.debug("Unhandled by dawg",e,t),e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ie=(oe=ce,s()(function(e){return function(){return oe.dispatch(e.apply(void 0,arguments))}})(E)),ue=function(){var e=document.querySelector("body .dawg"),t=function(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,a;t=r,a=o[n=e],n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a})}return r}({},ce.getState(),{boundActions:ie});Object(o.f)(Object(c.a)(re,t),document.body,e)};ce.subscribe(ue),ue(),ie.newGame()}});